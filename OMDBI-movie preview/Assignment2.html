<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1.0" />
   <meta http-equiv="X-UA-Compatible" content="ie=edge" />
   <link rel="stylesheet" href="./styles.css">
   <script type="text/javascript" src="https://code.jquery.com/jquery-3.0.0.min.js"></script>
   <title>Movie Central</title>
</head>

<body>
   <header>
      <h1>Movie Central</h1>
   </header>
   <table id=table></table>

   <ul id='demo'></ul>
</body>

</html>
<script>
   //CREATE table by appending titles and showtimes from server.
   let table = document.getElementById("table");
   let rows = 0;
   let url = "http://localhost:8000/showtimes";
   fetch(url)
      .then(function (res) {
         return res.json()
      })
      .then(function (result) {
         for (let x = 0; x < result.length; x++) {
            let newrow = table.insertRow(rows);
            let TitleCell = document.createElement("th")
            TitleCell.setAttribute("id", result[x].id);
            TitleCell.innerHTML = result[x].title;
            newrow.appendChild(TitleCell);
            let timeCell = document.createElement("td");
            for (let y = 0; y < result[x].times.length; y++) {
               timeCell.innerHTML += result[x].times[y] + '<br>';
               newrow.appendChild(timeCell);
            }
            rows += 1;
         }
         //onclick first movie 
         $("#tt0059742").click(function () {
            removeAppendedMovieList();       //removes previously clicked movie 
            //fetch data from OMDB API and append into unordered list
            const ul = document.getElementById('demo');
            const url = "https://www.omdbapi.com/?apikey=1e944f6c&i=tt0059742";
            fetch(url)
               .then((resp) => resp.json())
               .then(function (data) {
                  console.log(data);
                  let demo = document.getElementById('demo');
                  //create div tag
                  let div = document.createElement('div');
                  //create black line
                  let hr = document.createElement('hr');
                  demo.appendChild(hr);
                  let ul = document.createElement('ul');
                  demo.appendChild(div);
                  div.appendChild(ul)
                  let li = document.createElement('li');
                  //create text nodes for movie details
                  let TitleContent = document.createTextNode('Title: ' + data.Title);              //gets title
                  let yearContent = document.createTextNode('Year: ' + data.Year);                 //gets year
                  let genreContent = document.createTextNode('Genre: ' + data.Genre);              //gets genre
                  let RuntimeContent = document.createTextNode('Runtime: ' + data.Runtime);        //gets runtime
                  let DirectorContent = document.createTextNode('Director: ' + data.Director);     //gets director name
                  let WriterContent = document.createTextNode('Writer: ' + data.Writer);           //gets writer name
                  let PlotContent = document.createTextNode('Plot: ' + data.Plot);                 //gets plot information
                  let imdbRatingContent = document.createTextNode('Rating: ');                     //gets rating

                  //create movie poster using image
                  let img = document.createElement('img');                                   
                  img.src = data.Poster;

                  
                  //append movie detials
                  li.appendChild(img);
                  li.appendChild(document.createElement("br"))                                     //break line
                  li.appendChild(TitleContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(yearContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(genreContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(RuntimeContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(DirectorContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(WriterContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(PlotContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(imdbRatingContent);
                  li.appendChild(document.createElement("br"))

                  for(let i = 0;i <Math.floor(data.imdbRating);i++){
                     let starImg = document.createElement('img');
                     starImg.src="http://localhost:8000/award.png";
                     li.appendChild(starImg);
                  }
                  ul.appendChild(li);
                  div.appendChild(ul);


               })
               .catch(function (error) {
                  console.log(JSON.stringify(error));
               });

         });
         //repeat above process for second movie
         $("#tt0059113").click(function () {
            removeAppendedMovieList();
            const ul = document.getElementById('demo');
            const url = "https://www.omdbapi.com/?apikey=1e944f6c&i=tt0059113";
            fetch(url)
               .then((resp) => resp.json())
               .then(function (data) {
                  console.log(data);
                  let demo = document.getElementById('demo');
                  let div = document.createElement('div');
                  let hr = document.createElement('hr');
                  demo.appendChild(hr);
                  let ul = document.createElement('ul');
                  demo.appendChild(div);
                  div.appendChild(ul)
                  let li = document.createElement('li');
                  let TitleContent = document.createTextNode('Title: ' + data.Title);
                  let yearContent = document.createTextNode('Year: ' + data.Year);
                  let genreContent = document.createTextNode('Genre: ' + data.Genre);
                  let RuntimeContent = document.createTextNode('Runtime: ' + data.Runtime);
                  let DirectorContent = document.createTextNode('Director: ' + data.Director);
                  let WriterContent = document.createTextNode('Writer: ' + data.Writer);
                  let PlotContent = document.createTextNode('Plot: ' + data.Plot);
                  let imdbRatingContent = document.createTextNode('Rating: ');

                  let img = document.createElement('img');
                  img.src = data.Poster;

                  

                  li.appendChild(img);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(TitleContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(yearContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(genreContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(RuntimeContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(DirectorContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(WriterContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(PlotContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(imdbRatingContent);
                  li.appendChild(document.createElement("br"))

                  for(let i = 0;i <Math.floor(data.imdbRating);i++){
                     let starImg = document.createElement('img');
                     starImg.src="http://localhost:8000/award.png";
                     li.appendChild(starImg);
                  }
                  ul.appendChild(li);
                  div.appendChild(ul);

               })
               .catch(function (error) {
                  console.log(JSON.stringify(error));
               });
         });

            //third movie
         $("#tt0059243").click(function () {
            removeAppendedMovieList();
            const ul = document.getElementById('demo');
            const url = "https://www.omdbapi.com/?apikey=1e944f6c&i=tt0059243";
            fetch(url)
               .then((resp) => resp.json())
               .then(function (data) {
                  console.log(data);
                  let demo = document.getElementById('demo');
                  let div = document.createElement('div');
                  let hr = document.createElement('hr');
                  demo.appendChild(hr);
                  let ul = document.createElement('ul');
                  demo.appendChild(div);
                  div.appendChild(ul)
                  let li = document.createElement('li');
                  let TitleContent = document.createTextNode('Title: ' + data.Title);
                  let yearContent = document.createTextNode('Year: ' + data.Year);
                  let genreContent = document.createTextNode('Genre: ' + data.Genre);
                  let RuntimeContent = document.createTextNode('Runtime: ' + data.Runtime);
                  let DirectorContent = document.createTextNode('Director: ' + data.Director);
                  let WriterContent = document.createTextNode('Writer: ' + data.Writer);
                  let PlotContent = document.createTextNode('Plot: ' + data.Plot);
                  let imdbRatingContent = document.createTextNode('Rating: ');

                  let img = document.createElement('img');
                  img.src = data.Poster;

                  

                  li.appendChild(img);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(TitleContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(yearContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(genreContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(RuntimeContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(DirectorContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(WriterContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(PlotContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(imdbRatingContent);
                  li.appendChild(document.createElement("br"))

                  for(let i = 0;i <Math.floor(data.imdbRating);i++){
                     let starImg = document.createElement('img');
                     starImg.src="http://localhost:8000/award.png";
                     li.appendChild(starImg);
                  }
                  ul.appendChild(li);
                  div.appendChild(ul);

               })
               .catch(function (error) {
                  console.log(JSON.stringify(error));
               });
         });
         //fourth movie
         $("#tt0059578").click(function () {
            removeAppendedMovieList();
            const ul = document.getElementById('demo');
            const url = "https://www.omdbapi.com/?apikey=1e944f6c&i=tt0059578";
            fetch(url)
               .then((resp) => resp.json())
               .then(function (data) {
                  console.log(data);
                  let demo = document.getElementById('demo');
                  let div = document.createElement('div');
                  let hr = document.createElement('hr');
                  demo.appendChild(hr);
                  let ul = document.createElement('ul');
                  demo.appendChild(div);
                  div.appendChild(ul)
                  let li = document.createElement('li');
                  let TitleContent = document.createTextNode('Title: ' + data.Title);
                  let yearContent = document.createTextNode('Year: ' + data.Year);
                  let genreContent = document.createTextNode('Genre: ' + data.Genre);
                  let RuntimeContent = document.createTextNode('Runtime: ' + data.Runtime);
                  let DirectorContent = document.createTextNode('Director: ' + data.Director);
                  let WriterContent = document.createTextNode('Writer: ' + data.Writer);
                  let PlotContent = document.createTextNode('Plot: ' + data.Plot);
                  let imdbRatingContent = document.createTextNode('Rating: ');

                  let img = document.createElement('img');
                  img.src = data.Poster;

                  

                  li.appendChild(img);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(TitleContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(yearContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(genreContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(RuntimeContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(DirectorContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(WriterContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(PlotContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(imdbRatingContent);
                  li.appendChild(document.createElement("br"))

                  for(let i = 0;i <Math.floor(data.imdbRating);i++){
                     let starImg = document.createElement('img');
                     starImg.src="http://localhost:8000/award.png";
                     li.appendChild(starImg);
                  }
                  ul.appendChild(li);
                  div.appendChild(ul);


               })
               .catch(function (error) {
                  console.log(JSON.stringify(error));
               });
         });
         //fifth movie
         $("#tt0059661").click(function () {
            removeAppendedMovieList();
            const ul = document.getElementById('demo');
            const url = "https://www.omdbapi.com/?apikey=1e944f6c&i=tt0059661";
            fetch(url)
               .then((resp) => resp.json())
               .then(function (data) {
                  console.log(data);
                  let demo = document.getElementById('demo');
                  let div = document.createElement('div');
                  let hr = document.createElement('hr');
                  demo.appendChild(hr);
                  let ul = document.createElement('ul');
                  demo.appendChild(div);
                  div.appendChild(ul)
                  let li = document.createElement('li');
                  let TitleContent = document.createTextNode('Title: ' + data.Title);
                  let yearContent = document.createTextNode('Year: ' + data.Year);
                  let genreContent = document.createTextNode('Genre: ' + data.Genre);
                  let RuntimeContent = document.createTextNode('Runtime: ' + data.Runtime);
                  let DirectorContent = document.createTextNode('Director: ' + data.Director);
                  let WriterContent = document.createTextNode('Writer: ' + data.Writer);
                  let PlotContent = document.createTextNode('Plot: ' + data.Plot);
                  let imdbRatingContent = document.createTextNode('Rating: ');

                  let img = document.createElement('img');
                  img.src = data.Poster;

                  

                  li.appendChild(img);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(TitleContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(yearContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(genreContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(RuntimeContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(DirectorContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(WriterContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(PlotContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(imdbRatingContent);
                  li.appendChild(document.createElement("br"))

                  for(let i = 0;i <Math.floor(data.imdbRating);i++){
                     let starImg = document.createElement('img');
                     starImg.src="http://localhost:8000/award.png";
                     li.appendChild(starImg);
                  }
                  ul.appendChild(li);
                  div.appendChild(ul);


               })
               .catch(function (error) {
                  console.log(JSON.stringify(error));
               });
         });
         //6th movie
         $("#tt0059800").click(function () {
            removeAppendedMovieList();
            const ul = document.getElementById('demo');
            const url = "https://www.omdbapi.com/?apikey=1e944f6c&i=tt0059800";
            fetch(url)
               .then((resp) => resp.json())
               .then(function (data) {
                  console.log(data);
                  let demo = document.getElementById('demo');
                  let div = document.createElement('div');
                  let hr = document.createElement('hr');
                  demo.appendChild(hr);
                  let ul = document.createElement('ul');
                  demo.appendChild(div);
                  div.appendChild(ul)
                  let li = document.createElement('li');
                  let TitleContent = document.createTextNode('Title: ' + data.Title);
                  let yearContent = document.createTextNode('Year: ' + data.Year);
                  let genreContent = document.createTextNode('Genre: ' + data.Genre);
                  let RuntimeContent = document.createTextNode('Runtime: ' + data.Runtime);
                  let DirectorContent = document.createTextNode('Director: ' + data.Director);
                  let WriterContent = document.createTextNode('Writer: ' + data.Writer);
                  let PlotContent = document.createTextNode('Plot: ' + data.Plot);
                  let imdbRatingContent = document.createTextNode('Rating: ');

                  let img = document.createElement('img');
                  img.src = data.Poster;

                  

                  li.appendChild(img);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(TitleContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(yearContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(genreContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(RuntimeContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(DirectorContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(WriterContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(PlotContent);
                  li.appendChild(document.createElement("br"))
                  li.appendChild(imdbRatingContent);
                  li.appendChild(document.createElement("br"))

                  for(let i = 0;i <Math.floor(data.imdbRating);i++){
                     let starImg = document.createElement('img');
                     starImg.src="http://localhost:8000/award.png";
                     li.appendChild(starImg);
                  }
                  ul.appendChild(li);
                  div.appendChild(ul);

               })
               .catch(function (error) {
                  console.log(JSON.stringify(error));
               });
         });
      })
      //removes previously clicked movie details
      function removeAppendedMovieList(){
         let a = document.getElementById(demo)
         demo.innerHTML = ' ';
      }
</script>